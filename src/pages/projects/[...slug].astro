---
import { getCollection, render } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const projects = await getCollection(
        "projects",
        ({ data }) => data.lang === "en",
    );
    return projects.map((project) => ({
        params: { slug: project.id.replace("en/", "").replace(".md", "") },
        props: { project },
    }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---

<Layout
    title={`${project.data.title} | Kyoshiro`}
    description={project.data.description}
>
    <main class="bg-gray-900 text-white min-h-screen py-20 px-4">
        <div class="max-w-4xl mx-auto">
            <a
                href="/projects"
                class="text-blue-400 hover:underline mb-8 inline-block"
            >
                ‚Üê Back to Projects
            </a>
            {
                project.data.image && (
                    <img
                        src={project.data.image}
                        alt={project.data.title}
                        class="w-full h-64 object-cover rounded-lg mb-8"
                    />
                )
            }
            <h1 class="text-4xl font-bold mb-4">{project.data.title}</h1>

            <div class="flex flex-wrap gap-2 mb-8">
                {
                    project.data.tags.map((tag) => (
                        <span class="bg-blue-600 text-sm px-2 py-1 rounded">
                            {tag}
                        </span>
                    ))
                }
            </div>

            <div class="prose prose-invert max-w-none">
                <Content />
            </div>
        </div>
    </main>
</Layout>
